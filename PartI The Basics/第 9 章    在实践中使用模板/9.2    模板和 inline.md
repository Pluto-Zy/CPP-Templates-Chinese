### 9.2    模板和 `inline`

将函数声明为内联是提高程序运行速度的常见方式。`inline` 说明符用于提示实现，在调用点内联替换函数体要优于通常的函数调用机制。

但是，实现可能忽略该提示。因此，`inline` 唯一保证的效果是，允许函数定义在程序中出现多次（通常是因为它出现在头文件中，而在多个地方被包含）。

就像内联函数，函数模板也可以被定义在多个翻译单元中。这通常是由在头文件中放置定义，然后被多个 CPP 文件包含所实现的。

但是，这不意味着函数模板默认使用内联替换。在调用点，函数模板体的内联替换是否优于以及何时优于一般的函数调用机制，是完全取决于编译器的。也许令人惊讶的是，在确认内联调用是否会带来净性能提升这方面，编译器往往会比程序员更好。因此，关于内联的精确策略因编译器而异，甚至依赖于特定的编译选项。

然而，使用合适的性能监控工具，程序员可能会拥有比编译器更好的信息，因此可能希望覆盖编译器的决定（例如，在为特定平台（如手机或特定输入）调整软件时）。有时这只能使用特定编译器的属性实现，如 `noinline` 或 `always_inline`。

这一点上值得指出的是，函数模板的全特化在这方面就像普通函数一样：它们的定义只能出现一次，除非它们被定义为 `inline`（见原书 338 页 16.3 节）。这一主题的更广泛、详细的介绍见附录 A。